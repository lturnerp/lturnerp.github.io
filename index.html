<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Proyectos Yadran~REVER</title>
  <link rel="shortcut icon" href="data:image/svg+xml;base64,PHN2ZyBpZD0iQ2FwYV8xIiBkYXRhLW5hbWU9IkNhcGEgMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgNTIxLjYyIDUyMS42MiI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNhZjlhNmI7fTwvc3R5bGU+PC9kZWZzPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI2MC44MSw0OTcuNTksMzczLjYsMjRINDg1LjA1TDM0MS4xOCw0OTYuODNIMTgwLjQzTDM2LjU2LDI0SDE0OFoiLz48L3N2Zz4=" />
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Saira+Condensed:wght@300;400;500;600;700&family=Manrope:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'primary': '#100F2B', 
            'secondary': '#B7BECC', 
            'accent': '#AF9A6B', 
            'text-main': '#100F2B', 
            'text-light': '#6A737D', 
            'border-color': '#AF9A6B', 
            'checkbox-active': '#AF9A6B', 
            'checkbox-border': '#B7BECC',
          },
          fontFamily: {
            'saira': ['"Saira Condensed"', 'sans-serif'],
            'manrope': ['"Manrope"', 'sans-serif'],
          },
        },
      },
    }
  </script>
  <style>
    body {
      font-family: 'Manrope', sans-serif;
      background-color: #B7BECC; 
      -webkit-user-select: none; /* Safari */
      -ms-user-select: none; /* IE 10+ */
      user-select: none; /* Estándar */
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    // Ya no se necesita DEFAULT_MINDMAP aquí, se cargará desde un archivo

    const generateNodeId = () => {
      return Math.random().toString(36).substr(2, 9);
    };

    const DOC_TYPE_COLORS = {
     "MO": "bg-[#3B82F6]",
     "NP": "bg-[#10B981]",
     "PL": "bg-[#F59E0B]",
     "ORT": "bg-[#8B5CF6]",
     "PANO": "bg-[#EC4899]",
     "DEFAULT": "bg-[#B7BECC]"
    };

    const DOC_TYPE_MAP = {
      "MO": "Modelo 3D",
      "NP": "Nube de Puntos",
      "PL": "Planos",
      "ORT": "Ortofotografía",
      "PANO": "Panoramas"
    };

    const Header = () => {
      return (
        <header className="bg-primary text-white p-3 shadow-md sticky top-0 z-50">
          <div className="container mx-auto flex items-center justify-between">
            <div className="logo-left h-8 md:h-10">
              <svg id="Capa_1" data-name="Capa 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 899.57 180.16" className="h-full"><defs><style>{`.cls-1{fill:#fff;}`}</style></defs><path class="cls-1" d="M439.6,164.69,475.14,15.46h35.12l-45.34,149H414.27l-45.34-149h35.12Z"/><path class="cls-1" d="M305,15.08,288.23,27.9H236.9V77.36h51.19V90.19H236.9v61.3h75.22v13.59h-112v-150Z"/><path class="cls-1" d="M679.33,15.08,662.58,27.9H611.25V77.36h51.2V90.19h-51.2v61.3h75.22v13.59H574.42v-150Z"/><path class="cls-1" d="M80.73,92.33a65.82,65.82,0,0,0,14.83-5.57,45.09,45.09,0,0,0,11.52-8.42,36.37,36.37,0,0,0,7.42-11,32.29,32.29,0,0,0,2.64-13,35.5,35.5,0,0,0-3.43-15.56,34,34,0,0,0-10.17-12.31,49.73,49.73,0,0,0-16.85-8A86.49,86.49,0,0,0,63.2,15.58H11.52v149h.69l24.36-18.88V94.57H54.1l51.8,70H135ZM66.63,84.8a51.51,51.51,0,0,1-15.56,2.25H36.57V24.91h22a34.59,34.59,0,0,1,12.64,2.25,30.43,30.43,0,0,1,10,6.23A27.19,27.19,0,0,1,87.75,43a32.23,32.23,0,0,1,2.31,12.36A28.37,28.37,0,0,1,79,78.45,38.41,38.41,0,0,1,66.63,84.8Z"/><path class="cls-1" d="M137.69,165.92H105.23l-51.8-70H37.91v50.43L12.67,165.92H10.18V14.24h53a88,88,0,0,1,23.85,2.92,51.32,51.32,0,0,1,17.31,8.26,35.44,35.44,0,0,1,10.56,12.79,37,37,0,0,1,3.56,16.14,33.93,33.93,0,0,1-2.75,13.57A38,38,0,0,1,108,79.27,47,47,0,0,1,96.19,88,67.16,67.16,0,0,1,83,93.11Zm-31.11-2.68h25.74L78.45,91.52l2-.49a65.26,65.26,0,0,0,14.53-5.45,44.29,44.29,0,0,0,11.18-8.18,35.23,35.23,0,0,0,7.15-10.55,31.14,31.14,0,0,0,2.53-12.5,34.24,34.24,0,0,0-3.3-15,32.7,32.7,0,0,0-9.77-11.82,48.44,48.44,0,0,0-16.41-7.81A85.46,85.46,0,0,0,63.2,16.92H12.86V162.38L35.23,145V93.23H54.78ZM51.07,88.39H35.23V23.57H58.6a36.12,36.12,0,0,1,13.12,2.34,31.92,31.92,0,0,1,10.44,6.51A28.86,28.86,0,0,1,89,42.49,33.74,33.74,0,0,1,91.4,55.36,29.68,29.68,0,0,1,79.82,79.5,40,40,0,0,1,67,86.08h0A53.16,53.16,0,0,1,51.07,88.39ZM37.91,85.71H51.07a50.44,50.44,0,0,0,15.16-2.19h0a37.06,37.06,0,0,0,11.93-6.13,27,27,0,0,0,10.56-22,31,31,0,0,0-2.21-11.85,26.05,26.05,0,0,0-6.19-9.14,29.13,29.13,0,0,0-9.57-6A33.43,33.43,0,0,0,58.6,26.25H37.91Z"/><path class="cls-1" d="M832.44,92.33a66,66,0,0,0,14.83-5.57,45.09,45.09,0,0,0,11.52-8.42,36.56,36.56,0,0,0,7.42-11,32.46,32.46,0,0,0,2.64-13,35.5,35.5,0,0,0-3.43-15.56,34,34,0,0,0-10.17-12.31,49.73,49.73,0,0,0-16.85-8,86.55,86.55,0,0,0-23.49-2.87H763.23v149h.69l24.36-18.88V94.57h17.53l51.8,70h29.1Zm-14.1-7.53a51.51,51.51,0,0,1-15.56,2.25h-14.5V24.91h22A34.63,34.63,0,0,1,823,27.16a30.43,30.43,0,0,1,10,6.23A27.19,27.19,0,0,1,839.46,43a32.23,32.23,0,0,1,2.31,12.36A28.37,28.37,0,0,1,830.7,78.45,38.41,38.41,0,0,1,818.34,84.8Z"/><path class="cls-1" d="M889.39,165.92H856.93l-51.79-70H789.62v50.43l-25.24,19.58h-2.49V14.24h53a88,88,0,0,1,23.85,2.92,51.42,51.42,0,0,1,17.31,8.26,35.44,35.44,0,0,1,10.56,12.79,37,37,0,0,1,3.56,16.14,33.77,33.77,0,0,1-2.76,13.57,37.77,37.77,0,0,1-7.68,11.35A47,47,0,0,1,847.9,88a67.16,67.16,0,0,1-13.19,5.16Zm-31.1-2.68H884L830.16,91.52l2-.49a65.26,65.26,0,0,0,14.53-5.45,44.29,44.29,0,0,0,11.18-8.18A35.23,35.23,0,0,0,865,66.85a31.14,31.14,0,0,0,2.53-12.5,34.24,34.24,0,0,0-3.3-15,32.7,32.7,0,0,0-9.77-11.82A48.44,48.44,0,0,0,838,19.74a85.46,85.46,0,0,0-23.12-2.82H764.57V162.38L786.94,145V93.23h19.55ZM802.78,88.39H786.94V23.57h23.37a36.12,36.12,0,0,1,13.12,2.34,31.92,31.92,0,0,1,10.44,6.51,28.86,28.86,0,0,1,6.83,10.07,33.74,33.74,0,0,1,2.41,12.87A29.76,29.76,0,0,1,831.53,79.5a40.08,40.08,0,0,1-12.79,6.58h0A53.16,53.16,0,0,1,802.78,88.39Zm-13.16-2.68h13.16a50.44,50.44,0,0,0,15.16-2.19h0a37.06,37.06,0,0,0,11.93-6.13,27,27,0,0,0,10.56-22,31,31,0,0,0-2.21-11.85A26.05,26.05,0,0,0,832,34.37a29.13,29.13,0,0,0-9.57-6,33.43,33.43,0,0,0-12.15-2.16H789.62Z"/></svg>
            </div>
            <div className="logo-right h-8 md:h-10">
              <svg id="Capa_2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 199.32 43.32" className="h-full"><defs><style>{`.cls-1{fill:#fff;stroke-width:0px;}`}</style></defs><g id="Dño"><path class="cls-1" d="m31.1,5.7c-2.92-1.82-6.24-2.9-9.58-3.1C19.82,1.08,17.63.15,15.34,0h-.12s-.21,3.29-.21,3.29c-4.87,1.34-9.04,4.35-11.76,8.49C.31,16.26-.68,21.68.46,27.05l.27,1.26,1.28.13c.12.01.25.02.37.03,4.39.34,7.7-1.38,10.98-3.33l1.59-.95-3.25-4.93c1.99-1.33,4.45-1.94,6.73-1.66,1.62.2,3.88.93,5.46,3.29.87,1.3,1.83,2.41,2.87,3.32.79.74,1.74,1.37,2.81,1.89l.12.04h0c3.06,1.42,6.51,1.31,9.98-.32l.94-.44.07-1.04c.14-1.99-.02-3.99-.47-5.95-1.21-5.27-4.44-9.78-9.12-12.7Zm.39,17.38c-.92-.38-1.81-.98-2.66-1.77-1.25-1.31-2.67-3.68-2.37-7.48v-.13s-.12,0-.12,0c-1.47-.06-2.51.53-3.18,1.8-1.3-.74-2.75-1.21-4.3-1.4-3.81-.46-7.82.84-10.72,3.48l-1.12,1.02,2.92,4.43c-1.82,1-3.83,1.9-6.26,1.95-.53-3.98.36-7.97,2.52-11.25,2.38-3.62,6.07-6.17,10.41-7.19,1.63-.38,3.3-.51,4.97-.38,2.66.21,5.3,1.09,7.64,2.55,3.87,2.41,6.54,6.13,7.54,10.48.29,1.27.43,2.56.43,3.85-2.05.75-3.96.76-5.7.04Z"/><path class="cls-1" d="m30.99,31.85c-3.4,0-5.94-1.03-8.4-2.02-2.19-.88-4.25-1.71-6.69-1.71-1.72,0-3.48.42-5.38,1.27-2.15.97-4.49,2.5-7.13,4.68h-.01s0,.03,0,.03c3.78,5.77,10.15,9.22,17.04,9.22,4.25,0,8.31-1.29,11.76-3.74,3.37-2.39,5.91-5.7,7.34-9.57l.02-.04-.04.02c-3.11,1.26-5.9,1.87-8.51,1.87Zm-10.57,7.93c-2.28,0-4.49-.45-6.58-1.34-2.06-.87-3.9-2.13-5.47-3.74,3.93-2.74,6.17-3.05,7.52-3.05,1.76,0,3.35.64,5.37,1.46,2.64,1.07,5.64,2.28,9.72,2.28.26,0,.52,0,.78-.01-3.12,2.85-7.15,4.41-11.34,4.41Z"/><path class="cls-1" d="m195.53,11.16v17.36l-13.37-17.84h0s-3.78,0-3.78,0v24.57h3.3c.27,0,.48-.22.48-.48v-17.35l13.36,17.84h0s0,0,0,0h3.78V10.67h-3.3c-.27,0-.48.22-.48.48Z"/><path class="cls-1" d="m158.66,10.67l-8.17,21.41c-.92.36-1.97.58-3.22.58-3.75,0-5.24-1.87-7.13-4.23-.76-.95-1.58-1.98-2.62-2.92,1.04-.15,1.98-.4,2.8-.78,1.35-.61,2.37-1.49,3.07-2.64.7-1.15,1.04-2.52,1.04-4.14s-.31-2.87-.92-3.95c-.61-1.08-1.58-1.9-2.89-2.48-1.31-.57-2.99-.86-5.03-.86h-9.99v24.56h4.01v-9.34c4.23.17,5.91,2.26,7.84,4.68,2.07,2.59,4.41,5.52,9.81,5.52,5.1,0,7.83-2.64,10.23-4.97,2.55-2.47,4.43-4.27,8.81-3.3l.11.28,2.6,6.82c.07.19.25.31.45.31h4.01l-9.41-24.56h-5.4Zm-23.47,11.5h-5.08c-.27,0-.48-.22-.48-.48v-7.1c0-.27.22-.48.48-.48h5.21c1.28,0,2.31.14,3.07.43.76.29,1.3.72,1.62,1.29.31.57.47,1.31.47,2.21,0,1.42-.44,2.46-1.33,3.13-.89.67-2.2,1-3.95,1Zm21.13,5.33l.36-.95,4.06-10.92c.16-.42.75-.42.91,0l3.25,8.51c-4-.28-6.49,1.45-8.58,3.36Z"/><path class="cls-1" d="m115.02,12.08c-1.83-.94-4.15-1.41-6.96-1.41h-8.95v24.56h9.03c2.57,0,4.76-.5,6.59-1.52,1.83-1.01,3.23-2.44,4.22-4.3.98-1.86,1.47-4.07,1.47-6.63s-.44-4.79-1.33-6.59c-.89-1.8-2.24-3.17-4.07-4.11Zm.51,15.6c-.59,1.35-1.5,2.39-2.74,3.11-1.24.72-2.9,1.08-4.97,1.08h-4.2c-.27,0-.48-.22-.48-.48V14.51c0-.27.22-.48.48-.48h3.96c2.07,0,3.77.31,5.08.94,1.31.63,2.27,1.58,2.87,2.84.6,1.27.9,2.93.9,4.97,0,1.91-.29,3.54-.88,4.89Z"/><path class="cls-1" d="m67.4,10.92l-6.72,11.98c-.19.33-.66.33-.84,0l-6.72-11.98c-.09-.15-.25-.25-.42-.25h-3.83l9.37,16.58v7.98h4.04v-7.98h0l9.37-16.58h-3.83c-.18,0-.34.09-.42.25Z"/><path class="cls-1" d="m80.02,10.67l-6.47,16.96-1.26,3.31-1.64,4.29h3.84c.2,0,.38-.13.45-.32l.13-.34c2.52-6.29,9.81-7.32,11.68-6.84.4.1.74.23,1.04.38l2.6,6.82c.07.19.25.31.45.31h4.01l-9.41-24.56h-5.4Zm-1.25,15.47c-.24.16-.49.29-.73.43l4.06-10.92c.16-.42.75-.42.91,0l3.23,8.45c-1.94-.19-4.5.16-7.47,2.04Z"/></g></svg>
            </div>
          </div>
        </header>
      );
    };

    const CheckboxIcon = ({ checked, onChange }) => {
      return (
        <button
          type="button"
          onClick={onChange}
          className="inline-flex items-center justify-center focus:outline-none mr-1 flex-shrink-0"
          aria-label={checked ? "Checked" : "Unchecked"}
        >
          <div
            className={`w-4 h-4 border-2 rounded ${checked ? 'bg-checkbox-active border-checkbox-active' : 'border-checkbox-border'}`}
          >
            {checked && (
              <div className="w-full h-full flex items-center justify-center">
                <div className="w-2 h-2 bg-white rounded-sm"></div>
              </div>
            )}
          </div>
        </button>
      );
    };

    const ExpandCollapseIcon = ({ expanded, onClick, hasChildren }) => {
      if (!hasChildren) {
        return <span className="w-5 h-5 mr-1 flex-shrink-0"></span>;
      }
      return (
        <button
          type="button"
          onClick={onClick}
          className="w-5 h-5 mr-1 focus:outline-none text-text-light hover:text-text-main transition-colors flex-shrink-0"
          aria-label={expanded ? 'Collapse' : 'Expand'}
        >
          <svg
            className={`w-4 h-4 transform transition-transform duration-200 ${expanded ? 'rotate-90' : ''}`}
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fillRule="evenodd"
              d="M7.293 4.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L10.586 9 7.293 5.707a1 1 0 010-1.414z"
              clipRule="evenodd"
            />
          </svg>
        </button>
      );
    };

    const ColorIndicator = ({ colorClass }) => {
      const finalColorClass = colorClass || DOC_TYPE_COLORS.DEFAULT;
      return (
        <span className={`inline-block w-3 h-3 ${finalColorClass} rounded-full mr-2 flex-shrink-0`}></span>
      );
    };

    const MindMapNode = ({ node, level, onToggleChecked, onToggleExpanded, inheritedColor }) => {
      const paddingLeft = `${level * 20}px`; 
      const hasChildren = node.children && node.children.length > 0;

      const currentNodeColorClass = node.docTypeCode ? (DOC_TYPE_COLORS[node.docTypeCode] || DOC_TYPE_COLORS.DEFAULT) : inheritedColor;

      const handleCheckboxToggle = (e) => {
        e.stopPropagation();
        onToggleChecked(node.id);
      };

      const handleNodeClick = (e) => {
        if (e.target.tagName === 'A' || e.target.closest('a') || e.target.closest('button[aria-label*="Checked"]')) {
          return;
        }
        if (hasChildren) {
            e.stopPropagation(); 
            onToggleExpanded(node.id);
        }
      };
      
      const handleIconClickToExpand = (e) => {
        e.stopPropagation();
        if (hasChildren) {
            onToggleExpanded(node.id);
        }
      }

      const renderContent = () => {
        let tooltip = node.originalContent; 
        
        if (node.isParsedFolder) {
            tooltip = `Original: ${node.parsedNodeOriginalText}\n`;
            if (node.docTypeFull) tooltip += `Tipo Doc.: ${node.docTypeFull}\n`;
            if (node.projectName) tooltip += `Proyecto: ${node.projectName}\n`;
            tooltip += `Estatus: ${node.status || 'N/A'}, Revisión: ${node.revision || 'N/A'}`;
        } else if (node.linkUrl && node.originalContent !== node.displayContent) {
            tooltip = `Enlace: ${node.displayContent}\nURL: ${node.linkUrl}\nOriginal Markdown: ${node.originalContent}`;
        } else if (node.originalContent !== node.displayContent) { 
            tooltip = `Original Markdown: ${node.originalContent}`;
        }

        const mainTextClasses = `
          truncate font-manrope 
          ${node.checked ? 'font-semibold text-accent' : 'text-text-main'}
        `;
        
        const containerClasses = `
            ml-1 flex-grow min-w-0 
            ${hasChildren ? 'cursor-pointer' : 'cursor-default'} 
        `;

        const textToShowAsMain = node.displayContent; 
        const textToShowAsOriginal = node.isParsedFolder ? node.parsedNodeOriginalText : null;

        return (
          <div 
            className={`flex items-baseline justify-between w-full ${containerClasses}`} 
            title={tooltip}
          >
            <div className="truncate mr-2"> 
              {node.linkUrl ? (
                <a
                  href={node.linkUrl}
                  target="_blank"
                  rel="noopener noreferrer"
                  className={`text-blue-600 hover:text-blue-800 hover:underline ${mainTextClasses} ${node.checked ? 'text-accent' : ''}`}
                  onClick={(e) => e.stopPropagation()} 
                >
                  {textToShowAsMain}
                </a>
              ) : (
                <span className={mainTextClasses}>
                  {textToShowAsMain}
                </span>
              )}
            </div>

            {textToShowAsOriginal && (
              <span
                className="hidden sm:inline-block text-xs text-text-light font-manrope font-normal whitespace-nowrap truncate flex-shrink-0" 
                title={textToShowAsOriginal}
              >
                 {textToShowAsOriginal}
              </span>
            )}
          </div>
        );
      };
      
      let nodeBaseClasses = "flex items-center py-1.5 px-2 hover:bg-secondary rounded transition-colors duration-200 text-text-main";
      if (node.isHeaderLine) {
        nodeBaseClasses += " font-saira";
        if (level === 0) nodeBaseClasses += " font-bold text-xl mt-2 mb-1"; 
        else if (level === 1) nodeBaseClasses += " font-semibold text-lg mt-1";
      } else {
        nodeBaseClasses += " font-manrope";
        if (level === 0) nodeBaseClasses += " font-semibold text-lg"; 
        else if (level === 1) nodeBaseClasses += " font-medium text-base";
        else nodeBaseClasses += " text-sm";
      }

      return (
        <>
          <div
            className={nodeBaseClasses}
            style={{ paddingLeft: level > 0 ? paddingLeft : '0px' }} 
            onClick={handleNodeClick} 
          >
            {level >= 1 ? (
              <ColorIndicator colorClass={currentNodeColorClass} />
            ) : (
              <span className="w-3 h-3 mr-2 flex-shrink-0"></span>
            )}

            <ExpandCollapseIcon
              expanded={node.expanded}
              onClick={handleIconClickToExpand} 
              hasChildren={hasChildren}
            />  

            {node.isCheckbox && (
              <CheckboxIcon
                checked={node.checked || false}
                onChange={handleCheckboxToggle}
              />
            )}
            {renderContent()}
          </div>

          {node.expanded && node.children && (
            <div className="transition-all duration-200 ease-in-out">
              {node.children.map((childNode) => (
                <MindMapNode
                  key={childNode.id}
                  node={childNode}
                  level={level + 1}
                  onToggleChecked={onToggleChecked}
                  onToggleExpanded={onToggleExpanded}
                  inheritedColor={currentNodeColorClass} 
                />
              ))}
            </div>
          )}
        </>
      );
    };

        const MindMap = ({ data, onNodesChange }) => {
      const [rootNode, setRootNode] = React.useState(data);

      React.useEffect(() => {
        setRootNode(data);
      }, [data]);

      const updateNodeRecursively = (currentNode, nodeId, updateFn) => {
        // ... (sin cambios en esta función)
        if (currentNode.id === nodeId) {
          return updateFn(currentNode);
        }
        if (currentNode.children && currentNode.children.length > 0) {
          const newChildren = currentNode.children.map(child => 
            updateNodeRecursively(child, nodeId, updateFn)
          );
          if (newChildren.some((child, index) => child !== currentNode.children[index])) {
            return { ...currentNode, children: newChildren };
          }
        }
        return currentNode;
      };
      
      const handleToggleChecked = (nodeId) => {
        // ... (sin cambios en esta función)
        const newRootNode = updateNodeRecursively(rootNode, nodeId, node => ({
          ...node,
          checked: !node.checked
        }));
        setRootNode(newRootNode);
        onNodesChange(newRootNode);
      };

      const handleToggleExpanded = (nodeId) => {
        // ... (sin cambios en esta función)
        const newRootNode = updateNodeRecursively(rootNode, nodeId, node => ({
          ...node,
          expanded: !node.expanded
        }));
        setRootNode(newRootNode);
        onNodesChange(newRootNode);
      };
      
      if (!rootNode || !rootNode.id) {
          return <div className="p-4 bg-white rounded-lg shadow-lg text-center text-text-main font-manrope">Cargando datos del mapa...</div>;
      }

      // ----- INICIO DE CAMBIOS -----
      return (
        <div className="p-4 bg-white rounded-lg shadow-lg">
          {/* Contenedor del título principal y los botones */}
          <div className="flex items-center justify-between mb-4"> {/* Usar flex para alinear elementos */}
            
            {/* Título principal del MindMap */}
            <div 
              className="flex items-center text-2xl font-saira font-bold text-primary cursor-default" // cursor-default ya que la expansión se maneja por el icono
              title={rootNode.originalContent || rootNode.displayContent}
            >
              {/* Aquí podrías poner un ExpandCollapseIcon si quisieras que el título raíz sea colapsable */}
              {/* <ExpandCollapseIcon ... /> */}
              <span className="ml-1">{rootNode.displayContent}</span>
            </div>

            {/* Contenedor para los botones SVG a la derecha */}
            <div className="flex items-center space-x-2"> {/* space-x-2 para espaciado entre botones */}
              <a 
                href="https://build.dalux.com/client/310501216368984064/box/files/317742737728208896" 
                target="_blank" 
                rel="noopener noreferrer"
                title="Ver proyectos en Dalux"
                className="text-text-main hover:text-accent transition-colors"
              >
                {/* INSERTA TU PRIMER SVG AQUÍ */}
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  id="svg"
                  width="90"
                  height="50"
                  version="1.1"
                  viewBox="0 0 400 150"
                >
                  <g id="svgg" fillRule="evenodd" stroke="none">
                    <path
                      id="path0"
                      fill="#8cc43c"
                      d="M25.5 95.25v29.417h98.167V65.833H25.5z"
                    ></path>
                    <path
                      id="path1"
                      fill="#3c5c64"
                      d="M73.302 1.163c-.667.644-1.267 1.17-1.333 1.17-.12 0-1.362 1.095-2.414 2.128-.305.3-.555.504-.555.453s-.256.154-.57.455a120 120 0 0 1-1.853 1.714c-.706.642-1.496 1.364-1.756 1.605s-.505.406-.545.366c-.039-.039-.23.13-.424.376-.193.247-.352.382-.353.301s-.141.065-.312.324c-.172.26-.35.448-.396.417-.071-.047-1.902 1.543-3.238 2.812-.212.202-.386.316-.386.254 0-.063-.488.388-1.084 1.001-.596.614-1.083 1.078-1.083 1.031 0-.072-.487.369-2.358 2.138-.17.161-.37.292-.445.292s-.3.188-.499.417-.438.416-.53.416-.168.125-.168.278-.042.236-.094.184-.386.179-.742.514c-.356.334-.889.795-1.184 1.024-.294.23-.897.773-1.339 1.209-.442.435-.85.791-.907.791-.129 0-.688.503-1.75 1.574-.45.453-.817.777-.817.72 0-.097-1.103.897-2.771 2.498-.406.39-.792.71-.859.711-.178.004-1.274.997-1.101.998.081 0-.078.142-.353.315s-.987.792-1.582 1.375-1.134 1.042-1.198 1.021-.264.147-.442.375c-.179.227-.392.413-.473.413-.2 0-.809.716-.756.888.024.075-.02.098-.097.051s-.443.19-.813.529c-.371.339-1.178 1.066-1.793 1.616-.616.55-1.367 1.225-1.668 1.5s-1.062.95-1.691 1.5a49 49 0 0 0-1.565 1.42 7 7 0 0 1-.776.668c-.194.136-.933.771-1.642 1.413a167 167 0 0 1-3.18 2.832 66 66 0 0 0-1.433 1.279c-.26.245-.474.395-.474.333 0-.061-.291.207-.647.596-.356.39-.71.709-.785.709s-.46.35-.853.779c-.393.428-.715.73-.715.672 0-.059-.245.139-.545.438-.3.3-.68.597-.844.66s-.252.191-.195.283.018.168-.087.168c-.104 0-.445.262-.757.583-.311.321-.624.585-.694.587s-.761.602-1.535 1.333c-.774.732-1.45 1.33-1.502 1.33-.091 0-.728.591-1.112 1.034-.225.259-.875.799-.96.799-.034 0-.389.31-.79.689s-1.066.959-1.477 1.291-1.005.885-1.319 1.229c-.314.343-.671.625-.794.625-.122 0-.222.125-.222.277s-.047.231-.105.174-.414.213-.792.601c-.377.388-.859.826-1.069.972s-.885.716-1.5 1.265S.821 65.188.5 65.472l-.583.518 10.267.005L20.451 66l.422-.375c.231-.206.701-.6 1.044-.875a23 23 0 0 0 1.192-1.042c.313-.298.609-.541.658-.541s.203-.113.34-.25c.138-.138.195-.25.128-.25-.068 0 .293-.298.801-.662.509-.364.968-.776 1.022-.916.054-.139.344-.404.645-.587.301-.184.481-.334.4-.335-.082 0 .067-.169.329-.375.262-.207.499-.355.526-.33s.46-.369.962-.875.955-.92 1.006-.92.442-.319.868-.709 1.07-.971 1.431-1.291c.36-.321.888-.807 1.173-1.079.285-.273.561-.498.612-.5.204-.01 1.099-.864 1.211-1.157.066-.172.165-.267.219-.213.055.055.193.009.308-.101a101 101 0 0 1 2.419-2.119c1.127-.946 2.281-1.986 2.938-2.65.401-.405.728-.684.728-.62s.257-.13.571-.431a70 70 0 0 1 1.602-1.464c.568-.504 1.339-1.198 1.714-1.541.374-.344.745-.625.823-.625.079 0 .1-.07.048-.155s.053-.202.236-.26c.182-.058.578-.345.879-.637s.975-.879 1.496-1.304.902-.819.845-.875c-.056-.056.005-.103.136-.103.132 0 .784-.525 1.449-1.166.665-.642 1.282-1.167 1.372-1.167a.165.165 0 0 0 .163-.165c0-.091.261-.335.581-.542s.582-.483.583-.612c.001-.13.047-.192.101-.138.104.104.443-.176 2.167-1.793a42 42 0 0 1 1.579-1.417c.282-.229.757-.66 1.054-.958s.601-.542.673-.542.527-.393 1.011-.875c.484-.481 1.132-1.062 1.44-1.291s.767-.617 1.019-.862.458-.42.458-.389.319-.234.709-.59c1.468-1.34 2.505-2.251 2.839-2.493.19-.137.733-.625 1.209-1.083.761-.735 1.563-1.459 3.467-3.128.289-.254.759-.686 1.044-.959s.57-.496.633-.496.294-.207.512-.459c.351-.405.409-.424.51-.166.062.16.177.291.255.291s.49.337.914.749c.423.412.989.878 1.256 1.036s.486.367.486.465.208.302.463.452c.254.15.836.624 1.291 1.053a92 92 0 0 0 1.512 1.387c.376.335 1.035.927 1.465 1.317s.854.708.942.708.141.094.118.208c-.023.115.047.192.155.171.109-.021.382.181.607.449s.455.441.511.385.102.023.102.176.113.278.25.278c.138 0 .25.07.25.155 0 .086.151.203.336.262s.295.173.245.253.081.237.29.348.61.452.891.758c.282.307.559.557.617.557s.502.375.987.833c.486.459.969.834 1.073.834s.302.172.44.382.521.567.852.792.601.487.602.581c0 .095.207.297.459.45.252.152.846.637 1.32 1.077C95.034 36.426 95.687 37 95.777 37c.049 0 .419.349.823.777.403.427.733.733.733.68s.251.147.557.445c.306.297.844.76 1.196 1.028.351.267.834.674 1.072.903.239.23.95.867 1.581 1.417.63.55 1.263 1.131 1.407 1.292.144.16.353.291.465.291.111 0 .256.087.322.193q.115.188-.116.077c-.128-.064-.093-.019.079.099.173.118.81.681 1.417 1.252.607.57 1.167 1.039 1.244 1.042.076.002.47.344.875.76.404.416.735.717.735.669 0-.049.206.117.458.368.644.642 2.709 2.42 3.208 2.761.23.157.398.341.375.408s.015.123.084.124c.167.004.743.488 1.783 1.497 1.008.979 1.89 1.75 2 1.75.044 0 .37.282.725.625 1.389 1.343 2.7 2.545 2.7 2.475 0-.04.386.294.858.742s.924.773 1.004.724c.081-.05.126.009.1.13s.054.2.175.175c.122-.025.18.02.13.101s.319.429.82.773.872.687.827.76.144.233.42.356c.277.122.545.354.596.514s.15.292.22.292.44.288.822.641.695.621.695.596c0-.04.411.34 1.925 1.78l.508.483h10.283c6.745 0 10.284-.057 10.284-.167 0-.091-.064-.166-.141-.166-.078 0-.732-.557-1.455-1.236-.723-.68-1.373-1.201-1.443-1.157-.07.043-.128-.034-.128-.173a.5.5 0 0 0-.227-.384c-.343-.201-1.44-1.084-1.874-1.509-.211-.206-.425-.375-.475-.375s-.376-.281-.724-.625c-.638-.629-1.587-1.471-3.111-2.759a29 29 0 0 1-1.492-1.366c-.366-.366-.599-.554-.517-.416.082.137-.199-.107-.626-.542-.426-.435-.857-.792-.958-.792s-.136-.075-.079-.166c.056-.092.033-.167-.052-.167-.181 0-1.409-1.046-2.007-1.708-.227-.252-.47-.459-.539-.459s-.437-.3-.819-.666-.767-.667-.857-.667-.116-.075-.06-.167c.057-.091.03-.166-.059-.166s-.416-.244-.726-.542-.928-.837-1.372-1.198a29 29 0 0 1-1.43-1.25c-1.384-1.321-1.697-1.594-1.829-1.594-.185 0-.417-.24-.417-.43 0-.084-.058-.151-.129-.149s-.301-.167-.512-.375a63 63 0 0 0-1.6-1.462 68 68 0 0 1-1.683-1.542c-.257-.252-.548-.458-.647-.458a.176.176 0 0 1-.179-.171c0-.093-.185-.254-.411-.357-.227-.103-.374-.249-.328-.324.047-.075-.199-.318-.547-.54-.347-.223-1.054-.807-1.57-1.298a32 32 0 0 0-1.562-1.394c-.644-.517-1.054-.886-2.645-2.379-.515-.484-.937-.844-.937-.8s-.463-.363-1.028-.905c-.565-.541-1.09-.945-1.167-.898s-.138-.019-.138-.146c0-.128-.185-.331-.411-.452s-.372-.284-.324-.361.01-.142-.086-.142c-.174 0-.725-.453-1.771-1.458-.31-.298-.601-.542-.647-.542-.045 0-.527-.431-1.071-.958a43 43 0 0 0-1.781-1.625c-.434-.367-.909-.798-1.053-.959-.145-.16-.316-.291-.379-.291s-.516-.394-1.007-.875a32 32 0 0 0-1.64-1.492A59 59 0 0 1 99 21.513c-1.181-1.057-1.236-1.099-1.372-1.055-.07.023-.128-.068-.128-.202s-.154-.326-.341-.427-.568-.384-.845-.631a201 201 0 0 1-3.105-2.823c-.215-.206-.419-.375-.454-.375-.034 0-.357-.3-.716-.667-.36-.366-.698-.666-.753-.666s-.498-.37-.985-.821c-1.383-1.283-1.459-1.346-1.615-1.346-.081 0-.19-.165-.243-.368s-.145-.319-.204-.26-.283-.056-.498-.257-.686-.646-1.048-.99S86.001 10 85.96 10s-.515-.431-1.053-.958-1.142-1.071-1.341-1.209c-.2-.137-.746-.603-1.215-1.034-.468-.432-.851-.747-.851-.702s-.105-.014-.233-.132c-.127-.118-.198-.271-.156-.34.041-.069-.01-.125-.115-.125s-.447-.264-.76-.586c-.313-.323-.569-.552-.569-.51s-.326-.238-.725-.622c-.861-.83-3.906-3.477-4.212-3.661-.142-.085-.627.269-1.428 1.042m165.434 33.92c.041.23.021.417-.045.417s-.129.131-.141.292c-.061.832-.264 1.986-.393 2.226-.08.149-.105.312-.056.36.078.078-.054.948-.347 2.289-.05.229-.13.641-.178.916-.049.275-.124.62-.168.766-.044.145-.11.61-.145 1.032-.036.422-.118.852-.182.957-.065.104-.146.465-.18.801s-.107.836-.161 1.111a9 9 0 0 0-.127.943c-.016.243-.092.404-.169.356s-.121.128-.097.391c.023.262-.042.889-.145 1.393a52 52 0 0 0-.287 1.5c-.054.321-.145.846-.204 1.167s-.11.752-.117.958c-.006.207-.051.375-.1.375s-.095.132-.102.292c-.014.313-.143 1.01-.41 2.204-.092.41-.207 1.085-.256 1.5-.152 1.281-.173 1.413-.268 1.671-.098.266-.638 3.448-.712 4.196-.025.245-.088.517-.142.603-.053.087-.145.599-.203 1.138-.137 1.257-.166 1.427-.294 1.73-.058.137-.138.512-.178.833s-.087.621-.104.667a.5.5 0 0 0-.01.212c.012.071-.054.446-.146.833-.091.388-.198.93-.237 1.205s-.086.5-.104.5-.05.225-.072.5a5 5 0 0 1-.169.906 6 6 0 0 0-.186 1c-.03.327-.174 1.128-.318 1.782-.145.653-.251 1.253-.237 1.333a.5.5 0 0 1-.006.229c-.058.148-.166.735-.25 1.352a6 6 0 0 1-.229 1 2.6 2.6 0 0 0-.123.856c.012.252-.044.458-.125.458-.082 0-.103.12-.047.265s.054.342-.003.436c-.089.144-.162.624-.266 1.758-.011.114-.086.208-.168.208s-.113.057-.07.128c.044.07.009.501-.077.958s-.194 1.056-.241 1.331-.161.936-.255 1.469-.204 1.17-.244 1.416c-.04.247-.141.785-.226 1.197-.084.411-.112.813-.063.893s.009.195-.089.256c-.098.06-.196.483-.217.939-.022.456-.094.867-.16.913-.067.046-.171.496-.231 1a16 16 0 0 1-.254 1.5c-.078.321-.194.996-.258 1.5a18 18 0 0 1-.194 1.25c-.074.314-.359 1.85-.727 3.917a25 25 0 0 0-.212 1.416 7 7 0 0 1-.158.917 10 10 0 0 0-.182.917c-.04.275-.113.612-.164.75-.051.137-.138.625-.193 1.083-.056.458-.129.983-.163 1.167-.035.183-.218 1.195-.408 2.25a94 94 0 0 1-.514 2.666c-.162.726-.234 1.172-.418 2.584a20 20 0 0 1-.33 1.666c-.133.55-.262 1.394-.287 1.875s-.088.874-.142.875c-.054 0-.194.657-.312 1.459a44 44 0 0 1-.422 2.419l-.208.962 3.921-.045c3.773-.043 3.923-.057 3.978-.378.031-.183.135-.871.231-1.529s.209-1.369.251-1.583c.071-.354.138-.806.331-2.221.037-.275.11-.725.161-1s.1-.613.109-.75c.008-.138.083-.625.166-1.084.084-.458.186-1.096.227-1.416.041-.321.114-.771.16-1 .169-.824.298-1.76.318-2.292.011-.298.072-.542.135-.542s.115-.131.116-.291c.004-.81.41-3.388.767-4.875.033-.138.066-.419.073-.625l.013-.375h8.916c7.016 0 8.92.044 8.93.208.007.115.043.358.08.542.038.183.112.633.166 1 .053.366.13.854.169 1.083s.114.792.164 1.25.156 1.021.236 1.25.141.529.137.667c-.018.542.218 1.991.422 2.597.065.19.15.64.189 1 .186 1.688.289 2.422.527 3.732.262 1.449.36 2.102.484 3.237.129 1.179.263 2.009.416 2.585.083.312.112.631.064.708s1.744.141 3.981.141h4.067l-.233-1.209a57 57 0 0 1-.294-1.625 34 34 0 0 0-.339-1.833c-.08-.386-.262-1.811-.292-2.292-.007-.114-.059-.208-.116-.208-.056 0-.111-.131-.121-.292-.049-.781-.33-2.485-.721-4.375a23 23 0 0 1-.24-1.333c-.096-.782-.275-1.75-.37-2a4 4 0 0 1-.147-.75c-.073-.697-.251-1.935-.336-2.333-.344-1.619-.59-2.917-.633-3.334a11 11 0 0 0-.165-1 19 19 0 0 1-.371-2.083 35 35 0 0 0-.332-1.919c-.13-.643-.25-1.393-.267-1.667-.018-.273-.083-.572-.146-.664a1 1 0 0 1-.133-.417c-.011-.137-.099-.7-.196-1.25a44 44 0 0 1-.243-1.5 6 6 0 0 0-.095-.583 3 3 0 0 1-.069-.25 12 12 0 0 0-.082-.333c-.023-.092-.029-.373-.012-.625.016-.252-.047-.459-.14-.459s-.143-.138-.11-.306c.032-.169-.044-.795-.169-1.392a81 81 0 0 1-.315-1.569 59 59 0 0 0-.17-.899 19 19 0 0 1-.171-1.248c-.049-.457-.123-.944-.165-1.083a11 11 0 0 1-.346-1.753c-.028-.275-.065-.518-.084-.541-.081-.1-.329-1.551-.371-2.167-.014-.206-.092-.375-.174-.375s-.103-.121-.047-.268c.057-.147.032-.541-.054-.875a15 15 0 0 1-.256-1.274c-.084-.573-.287-1.828-.484-3a3.5 3.5 0 0 0-.156-.583c-.055-.138-.141-.625-.191-1.083-.134-1.242-.257-1.946-.431-2.478-.087-.262-.12-.538-.073-.613.046-.075.002-.187-.097-.248s-.144-.207-.099-.324.006-.541-.087-.942c-.16-.691-.386-1.96-.544-3.062-.04-.275-.155-.866-.256-1.314-.101-.447-.15-.847-.11-.887.041-.041.002-.312-.086-.603-.229-.754-.262-.924-.397-2.035-.066-.547-.159-1.061-.207-1.142s-.107-.381-.132-.666a20 20 0 0 0-.243-1.52 95 95 0 0 1-.328-1.75 91 91 0 0 0-.314-1.666 21 21 0 0 1-.262-1.704 11 11 0 0 0-.249-1.424 14 14 0 0 1-.275-1.38 28 28 0 0 0-.169-1.076 23 23 0 0 1-.144-.916c-.117-.848-.34-1.948-.414-2.042-.018-.023-.064-.229-.101-.458l-.344-2.084c-.151-.916-.273-1.779-.271-1.916.003-.138-.103-.636-.234-1.106s-.226-.921-.212-1a.5.5 0 0 0-.006-.228c-.045-.114-.133-.614-.26-1.479-.188-1.278.137-1.187-4.268-1.187h-3.986zm-63.277 44.662.042 44.933 11.375-.057c6.256-.031 11.712-.109 12.124-.172 2.187-.335 4.833-1.245 4.833-1.661 0-.078.057-.108.125-.067.176.104 1.223-.484 1.093-.614-.059-.059.019-.107.172-.107.154 0 .44-.185.637-.411.196-.226.409-.379.473-.339.144.089.834-.537.834-.756 0-.089.063-.142.14-.119.143.042 1.693-1.51 1.693-1.695 0-.055.171-.287.381-.515.896-.976 2.349-4.306 2.704-6.199.219-1.166.229-2.571.224-32.049-.003-16.409.005-30.117.017-30.463s-.035-.721-.104-.833-.142-.391-.16-.621a6.1 6.1 0 0 0-.36-1.667 4 4 0 0 1-.168-.5c-.049-.636-.784-2.44-1.141-2.797-.124-.125-.226-.334-.226-.465s-.075-.238-.167-.238-.167-.093-.167-.208-.169-.41-.375-.657c-.65-.78-1.206-1.509-1.264-1.658-.03-.079-.174-.143-.319-.143s-.216-.048-.158-.106-.099-.263-.348-.455a22 22 0 0 1-1.076-.921c-.343-.313-.793-.666-1-.784-.971-.553-1.708-.901-1.908-.901-.12 0-.218-.062-.218-.137 0-.156-2.489-1.007-3.25-1.112a8 8 0 0 1-.917-.189c-.229-.067-5.629-.15-12-.186l-11.583-.064zm97.874.002v44.92h28.75l-.048-3.5-.048-3.5h-20.486l-.042-41.375-.042-41.375-4.042-.045-4.042-.045zm39.578-44.708c-.213.555.039 85.044.254 85.044.014 0 .059.173.098.384.087.469.489 1.264.87 1.722.665.796.821.94 1.534 1.416 1.546 1.034.642.978 15.916.978h14l1.209-.583c.664-.321 1.208-.624 1.208-.673s.337-.446.748-.881c.411-.436.737-.845.724-.911-.013-.065.119-.418.294-.785.308-.647.319-1.58.359-31.917.023-17.187.061-36.368.083-42.625l.042-11.375h-8.085l.043 41.375.042 41.375-10.625-.044-10.624-.044-.042-41.289-.042-41.289-3.963-.045c-3.079-.035-3.98.002-4.043.167m47.981.253c.043.252.192.77.331 1.151.138.382.207.738.153.792s-.011.098.096.098.195.143.195.316.215.846.479 1.494c.263.647.438 1.217.389 1.267-.05.049.001.09.114.09.112 0 .161.07.108.155-.052.085.056.537.241 1.006.184.468.335.999.335 1.179 0 .179.067.327.149.327s.194.116.248.258c.061.158.031.216-.078.15-.097-.061-.021.195.169.568s.346.83.346 1.017.087.34.194.34.153.041.102.092c-.05.051.204.932.564 1.958.361 1.027.806 2.354.989 2.95s.415 1.271.514 1.5c.582 1.339.954 2.461.85 2.564-.056.057-.019.103.082.103s.177.131.169.291c-.008.161.249 1.004.571 1.875.647 1.752.968 2.665 1.026 2.917.021.092.121.317.222.5s.188.39.193.46c.043.594.255 1.27.375 1.195.082-.05.149.063.149.252 0 .439-.019.376.544 1.843.264.688.554 1.512.644 1.833s.208.696.264.834c.055.137.089.306.074.375-.014.068.053.125.15.125s.128.078.069.174-.039.264.044.375c.084.11.29.669.458 1.242s.353 1.042.41 1.042c.058 0 .115.131.127.292s.147.629.299 1.041c.153.413.319.938.369 1.167.051.229.175.521.276.648s.187.314.191.416.135.472.29.822c.156.35.273.688.26.75-.012.063.021.226.074.364.599 1.548 1.13 3.542.989 3.714-.091.111-.278.578-.415 1.036-.138.458-.602 1.771-1.031 2.917s-.794 2.158-.813 2.25a1.3 1.3 0 0 1-.133.333c-.199.333-.697 2.173-.653 2.417.024.137-.013.193-.084.123-.121-.119-.488.723-.636 1.46-.037.183-.271.858-.519 1.5-.249.642-.474 1.331-.501 1.532s-.11.464-.185.583c-.139.223-.234.554-.267.927-.009.114-.077.208-.15.208-.072 0-.217.319-.322.708-.105.39-.271.896-.37 1.125-.099.23-.19.454-.202.5a50 50 0 0 1-.547 1.834c-.05.137-.079.306-.064.375.014.068-.049.125-.14.125s-.167.187-.167.416c0 .23-.066.417-.146.417-.126 0-.381.752-.423 1.25a.42.42 0 0 1-.148.265c-.073.054-.145.26-.16.458s-.074.36-.131.36-.111.094-.121.209c-.036.412-.141.784-.255.898-.064.063-.116.276-.116.471 0 .196-.065.427-.144.514-.257.283-1.173 3.035-1.055 3.167.064.07.022.074-.093.008-.129-.074-.208-.021-.208.14 0 .426-.021.501-.195.711-.092.111-.127.266-.078.345.049.08-.011.338-.134.575-.241.464-.66 1.607-.69 1.879-.017.162-.067.29-.625 1.625-.143.344-.218.625-.166.625.053 0 .016.096-.082.214-.097.117-.217.398-.266.625s-.239.823-.421 1.328c-.183.504-.335 1.041-.338 1.194s-.084.304-.181.336-.196.17-.222.306c-.132.707-.464 1.662-.609 1.751-.091.057-.126.166-.078.244s-.095.578-.319 1.113c-.431 1.031-1.263 3.588-1.263 3.881 0 .117 1.33.175 4.004.175h4.005l.1-.504c.056-.277.168-.544.249-.595a.18.18 0 0 0 .052-.246c-.053-.086-.019-.155.075-.155s.128-.113.076-.25c-.055-.142-.004-.25.116-.25.117 0 .168-.045.114-.099s.005-.391.131-.75c.127-.358.177-.652.113-.654-.065-.001-.039-.058.057-.125s.315-.61.487-1.206.384-1.177.471-1.291c.087-.115.108-.209.048-.209s-.035-.139.057-.31c.091-.171.209-.556.262-.856.053-.301.183-.705.29-.898s.215-.427.24-.519c.197-.719.599-1.999.89-2.833.192-.55.361-1.132.375-1.292s.085-.292.157-.292.122-.056.112-.125a.7.7 0 0 1 .02-.25c.047-.144.063-.201.244-.875.074-.275.193-.575.264-.666a.84.84 0 0 0 .151-.334c.025-.188.821-2.866.967-3.25.052-.137.11-.306.13-.375.019-.068.056-.181.081-.25.026-.068.064-.2.085-.291.021-.092.057-.223.079-.292s.054-.181.071-.25.541-1.663 1.164-3.542c.624-1.879 1.138-3.51 1.143-3.625.005-.114.062-.208.127-.208.064 0 .167-.312.228-.692.061-.381.162-.775.225-.875a1.7 1.7 0 0 0 .164-.503 1.3 1.3 0 0 1 .189-.5c.235-.302.687-1.795.591-1.951-.049-.08.002-.146.114-.146.113 0 .161-.043.109-.096-.11-.109-.026-.401.71-2.487.291-.825.608-1.575.704-1.667q.175-.167.077.011c-.102.183.619 2.338.892 2.667.085.103.111.23.058.282-.053.053.02.346.162.652.142.305.294.768.339 1.028s.169.579.277.708c.107.13.147.236.089.236s.001.256.132.569c.131.314.195.614.141.667-.053.053-.003.097.112.097.114 0 .175.094.134.208-.041.115.029.414.156.665s.217.476.201.5.221.831.526 1.794c.306.962.543 1.806.526 1.875-.016.068.05.125.147.125s.137.064.088.143.016.436.144.792l.354.981c.067.184.14.425.164.536.066.315.748 2.426.904 2.798.279.666.389 1.002.365 1.117-.013.064.132.477.323.917.19.439.378.987.417 1.216s.133.566.209.75c.186.451.701 2.051.771 2.391.03.152.29.95.576 1.775s.547 1.613.581 1.75c.069.281 1.063 3.28 1.215 3.667.055.138.086.309.07.382-.016.072.055.287.156.477.102.189.333.878.513 1.531.181.652.406 1.278.499 1.391.094.112.122.283.063.378-.06.096-.029.174.068.174.098 0 .177.155.177.345 0 .994-.025.989 4.423.989 3.925 0 4.077-.012 4.077-.324 0-.178-.075-.37-.167-.426-.091-.057-.166-.249-.166-.427s-.08-.323-.177-.323-.133-.07-.081-.155-.123-.755-.39-1.488c-.268-.734-.444-1.377-.392-1.429s.008-.095-.099-.095-.195-.171-.195-.38c0-.208-.125-.558-.278-.777-.204-.29-.215-.36-.042-.255.189.114.198.094.044-.098-.168-.208-.949-2.377-.967-2.684a.47.47 0 0 0-.132-.237c-.068-.068-.125-.337-.125-.597s-.075-.472-.166-.472-.151-.056-.133-.125c.031-.11-.391-1.526-.658-2.208a6 6 0 0 1-.132-.375 2 2 0 0 0-.077-.209 1.4 1.4 0 0 1-.077-.208 8 8 0 0 0-.208-.542c-.316-.758-1.184-3.407-1.297-3.958-.061-.298-.165-.542-.229-.542-.065 0-.129-.147-.143-.327-.014-.179-.136-.573-.273-.875a6.2 6.2 0 0 1-.365-1.131 5.5 5.5 0 0 0-.408-1.167 6 6 0 0 1-.416-1.166c-.068-.321-.192-.67-.277-.775-.084-.105-.184-.353-.222-.55s-.181-.584-.318-.858-.299-.83-.36-1.236c-.06-.405-.21-.82-.332-.921s-.181-.292-.131-.423c.05-.13.025-.237-.057-.237-.081 0-.164-.199-.185-.442s-.12-.543-.223-.666c-.103-.124-.131-.226-.063-.226.069 0 .052-.093-.037-.208-.088-.115-.257-.565-.375-1s-.284-.792-.369-.792-.113-.068-.061-.151c.051-.084-.064-.515-.256-.959-.193-.443-.372-.956-.399-1.14-.082-.552-.822-2.491-1.002-2.622-.092-.067-.108-.124-.036-.125s.045-.163-.06-.359a3.4 3.4 0 0 1-.272-.875c-.044-.285-.144-.596-.222-.691-.077-.094-.176-.366-.219-.603a3.2 3.2 0 0 0-.241-.745c-.089-.172-.356-.913-.593-1.646-.237-.734-.625-1.896-.862-2.584-.541-1.57-.571-1.661-.563-1.71.004-.022-.077-.262-.18-.533-.134-.351-.137-.604-.012-.875.386-.837.529-1.228 1.356-3.715.472-1.421.922-2.703.998-2.849.077-.146.176-.446.221-.667.044-.22.229-.794.41-1.276.181-.481.292-.875.246-.875s.088-.275.297-.613c.208-.337.287-.556.176-.487-.112.069-.052-.143.132-.471s.289-.595.233-.595-.021-.096.076-.213.212-.435.257-.708c.044-.273.092-.496.106-.496.015 0 .054-.113.087-.25.109-.455.789-2.247.917-2.417.069-.091.186-.429.26-.75l.155-.666c.01-.046.146-.374.301-.729s.281-.752.281-.883.114-.459.254-.728c.139-.27.254-.528.254-.574.003-.188.486-1.518.929-2.556.129-.304.192-.623.14-.708-.053-.086-.025-.156.062-.156.086 0 .21-.281.274-.625s.185-.707.269-.808c.083-.101.168-.382.188-.625s.095-.442.167-.442c.071 0 .114-.056.095-.125-.02-.068.059-.295.174-.503s.168-.447.116-.53-.016-.2.078-.258c.095-.059.129-.177.077-.262s-.025-.155.062-.155c.155 0 .393-.633.452-1.202.017-.158.183-.645.371-1.084.187-.438.366-.985.398-1.214.031-.229.095-.454.142-.5.165-.162.832-1.927.832-2.202 0-.153.075-.325.166-.381.092-.057.167-.309.167-.56s.066-.528.146-.615c.213-.231.888-2.109.881-2.45-.003-.161.055-.292.129-.292s.193-.244.263-.542c.168-.715.149-.658.373-1.061.108-.194.155-.394.105-.444s.002-.265.116-.476c.113-.212.264-.613.335-.89s.181-.672.244-.879l.114-.375H391v.407c0 .224-.08.457-.178.517-.098.061-.141.206-.096.324s-.022.363-.149.545c-.128.181-.185.377-.128.434.058.058-.011.236-.153.397-.281.321-.457.806-.546 1.509-.032.251-.22.868-.419 1.37-.421 1.067-1.15 3.266-1.242 3.747-.035.184-.079.352-.097.375a.6.6 0 0 0-.065.167c-.017.069-.163.425-.325.792-.162.366-.312.816-.335 1-.056.448-.406 1.541-.712 2.222-.138.305-.209.596-.158.646s-.019.249-.153.441c-.134.191-.244.463-.245.603s-.113.469-.25.732c-.137.262-.249.583-.249.712 0 .13-.155.665-.344 1.189-.189.525-.381 1.142-.427 1.371s-.153.488-.239.575-.157.327-.157.532-.075.42-.166.477-.167.27-.167.474c0 .205-.151.668-.336 1.03-.184.363-.299.754-.255.869.044.116-.005.21-.109.21s-.146.043-.093.096.023.334-.066.625c-.09.291-.18.604-.202.696a3 3 0 0 1-.245.541c-.113.207-.156.375-.096.375s.019.11-.092.243c-.111.134-.153.321-.094.417s.047.174-.027.175-.278.47-.452 1.042-.361 1.115-.414 1.207a1.1 1.1 0 0 0-.106.416c-.004.138-.103.421-.218.629-.116.208-.165.452-.11.541s.016.164-.089.164-.16.091-.122.204c.037.112-.028.388-.145.613s-.174.47-.127.546c.046.075 0 .137-.102.137s-.153.056-.111.125c.041.068-.063.462-.231.875-.223.545-.309.645-.315.365-.006-.247-.079-.342-.202-.266-.115.071-.147.046-.08-.063.061-.099-.007-.505-.153-.9a41 41 0 0 1-.663-2.111c-.219-.766-.495-1.509-.613-1.651-.119-.142-.185-.266-.147-.275.148-.035-.178-1.266-.336-1.266-.093 0-.127-.067-.077-.149s-.063-.625-.252-1.208a24 24 0 0 1-.404-1.341 3.2 3.2 0 0 0-.266-.666c-.113-.212-.195-.424-.181-.469.067-.222-.534-2-.675-2-.09 0-.12-.113-.067-.25.053-.138.019-.25-.075-.25-.095 0-.132-.064-.084-.142s-.175-.921-.496-1.875c-.32-.953-.613-1.935-.651-2.182a3.8 3.8 0 0 0-.333-.959c-.145-.28-.215-.509-.156-.509s-.021-.194-.176-.431c-.156-.237-.246-.468-.2-.513.045-.046-.095-.602-.311-1.236-.215-.634-.35-1.153-.298-1.153s.021-.094-.067-.209-.262-.583-.384-1.041a13 13 0 0 0-.473-1.417c-.138-.321-.234-.677-.213-.792s-.045-.208-.146-.208-.137-.075-.081-.167c.057-.091.045-.26-.027-.375a1.4 1.4 0 0 1-.163-.429 2.5 2.5 0 0 0-.157-.5c-.153-.345-.128-.257-.397-1.404-.124-.527-.288-.958-.366-.958-.077 0-.125-.057-.108-.125.05-.198-.223-1.275-.37-1.459a.7.7 0 0 1-.147-.291 1.4 1.4 0 0 0-.027-.167 7 7 0 0 1-.068-.326c-.03-.156-.18-.663-.334-1.125l-.279-.841h-8.327zm-163.596 6.993c.483.086.967.244 1.075.352a.8.8 0 0 0 .503.196c.169 0 .397.074.508.164.959.783 1.286 1.016 1.384.988.181-.052 1.239 1.037 1.675 1.723.218.344.471.625.561.625s.15.057.131.125c-.019.069.133.444.337.834.203.389.322.708.263.708s-.029.094.066.208c.095.115.172.246.171.292s.044.346.098.667l.18 1.083c.105.637.102 57.855-.002 59.083-.174 2.042-1.175 3.983-2.951 5.724-.811.794-2.188 1.677-2.219 1.421-.004-.034-.21.072-.458.234s-.451.254-.451.203c0-.052-.155-.011-.344.091-.352.188-.463.216-1.594.412-.355.061-3.383.123-6.729.138l-6.083.027.042-37.802.042-37.802 6.458.075c3.552.042 6.853.146 7.337.231m45.455 7.802c.057.273.127.646.155.83s.068.333.088.333c.021 0 .064.262.096.583.18 1.786.278 2.42.414 2.674.083.155.115.318.071.362-.043.044.035.672.175 1.397s.297 1.692.349 2.151.152 1.058.222 1.333.109.631.085.792c-.024.16.021.291.099.291s.123.207.1.459.017.683.088.958c.135.521.335 1.787.363 2.292.008.16.056.292.105.292.049.001.105.349.125.774.019.425.161 1.381.314 2.124.154.743.294 1.576.312 1.851s.129.947.246 1.493.241 1.221.274 1.5.096.732.14 1.007c.043.275.124.95.179 1.5s.166 1.024.248 1.053.108.16.057.291c-.05.132-.035.371.035.531s.15.592.179.959c.029.366.101.854.161 1.083.059.229.13.642.158.917s.087.652.131.839.132.786.195 1.333.179 1.257.258 1.578c.079.32.177.898.22 1.282.042.385.114.76.159.834.046.073.127.532.181 1.018a16 16 0 0 0 .183 1.25c.102.44.268 1.601.279 1.949.005.138.069.55.144.917.074.366.178.929.229 1.25s.131.771.176 1c.11.568.341 2.202.488 3.459.046.39.129.784.185.875.068.109-2.622.166-7.835.166-7.618 0-7.934-.013-7.841-.306.053-.167.126-.599.162-.958.065-.651.17-1.317.431-2.734.076-.411.102-.804.059-.875-.044-.07-.015-.127.063-.127s.161-.282.183-.625.087-.85.144-1.125.11-.725.118-1c.009-.275.064-.538.124-.584s.152-.458.205-.916c.053-.459.141-1.059.197-1.334.055-.275.12-.725.144-1s.101-.632.172-.794a1.1 1.1 0 0 0 .041-.625c-.047-.182-.023-.292.055-.244.077.048.137-.046.132-.208s.079-.82.186-1.462c.108-.642.226-1.441.263-1.777s.112-.823.165-1.083.133-.773.176-1.14.121-.854.174-1.083c.155-.668.284-1.547.3-2.042.008-.252.061-.458.118-.458s.101-.207.099-.459.06-.758.138-1.125c.078-.366.15-.741.159-.833s.077-.442.151-.779c.073-.337.153-.862.178-1.167.026-.305.098-.676.161-.826s.139-.599.17-1c.03-.4.069-.728.087-.728s.059-.225.091-.5c.179-1.548.293-2.24.582-3.548.107-.485.153-.992.101-1.125-.051-.134-.03-.244.048-.244.126 0 .193-.392.427-2.5.036-.321.142-.958.237-1.416.171-.828.344-1.99.404-2.709.017-.206.091-.375.166-.375.074 0 .093-.067.042-.149s-.012-.551.086-1.041c.098-.491.214-1.156.259-1.476l.15-1.084c.038-.275.11-.875.159-1.333.151-1.381.308-1.588.503-.663"
                    ></path>
                    <path
                      id="path2"
                      fill="#3c5464"
                      d="M72.282 1.922c-.613.539-.393.535.248-.005.273-.229.434-.415.358-.412s-.348.191-.606.417m6.051 19.795c0 .03.235.274.521.543.365.343.457.385.309.14-.183-.303-.83-.834-.83-.683m5.339 4.741c.003.069.209.269.458.445l.453.32-.404-.445c-.424-.467-.516-.525-.507-.32m-40.643 1.261c-.199.212-.362.443-.362.512 0 .131.251-.105.645-.607.331-.42.142-.357-.283.095M61.5 29.833c-.211.184-.309.334-.218.334s.302-.15.468-.334c.166-.183.264-.333.218-.333s-.257.15-.468.333m28.5 2.25c.215.23.418.417.45.417s-.065-.187-.215-.417-.353-.416-.45-.416 0 .187.215.416m85.415 47.75c0 24.704.02 34.811.043 22.459.024-12.352.024-32.565 0-44.917-.023-12.352-.043-2.246-.043 22.458m-152.179-34.6c-.359.312-.615.593-.569.625.045.032.378-.223.74-.566.819-.78.705-.819-.171-.059m83.431 1.415c0 .183.483.591.582.492.041-.041-.073-.201-.254-.356s-.328-.216-.328-.136M18.792 49.16c-.425.414-.359.582.071.182.199-.186.331-.367.292-.402s-.203.064-.363.22m8.657 10.604c-.257.222-.407.4-.333.397.184-.008.947-.654.866-.734-.036-.036-.276.116-.533.337m229.72 34.667c.002.175.079.431.172.569.123.183.139.115.057-.25-.137-.613-.232-.746-.229-.319m-19.139 10.361c2.446.025 6.496.026 9 0s.503-.048-4.447-.048-6.999.022-4.553.048m149.228 6.416c.062.207.181.449.265.538s.068-.079-.035-.375c-.211-.605-.406-.743-.23-.163m-134.422 2.473c.001.221.076.515.166.652.116.176.132.077.057-.333-.132-.719-.227-.854-.223-.319m-52.003 1.677c-.321.282-.432.436-.248.342.305-.154 1.06-.876.899-.86-.037.004-.33.237-.651.518m85.804 2.267c2.871.026 7.521.025 10.333 0s.463-.047-5.22-.047-7.984.021-5.113.047"
                    ></path>
                    <path
                      id="path3"
                      fill="#3c5c6c"
                      d="M350.249 76.667c0 22.962.019 32.356.043 20.875s.023-30.269 0-41.75c-.024-11.482-.043-2.088-.043 20.875M212.415 79.75c0 15.767.019 22.192.043 14.278s.024-20.813 0-28.666-.043-1.379-.043 14.388M302.071 121c0 1.971.024 2.777.053 1.792.03-.986.03-2.598 0-3.584-.029-.985-.053-.179-.053 1.792"
                    ></path>
                  </g>
                </svg>
              </a>
              <a 
                href="https://rever.prevu3d.com/nodes/d94f902c-8e91-4561-bbb5-b3604cbf9e57" 
                target="_blank" 
                rel="noopener noreferrer"
                title="Ver proyectos en Prevu3D"
                className="text-text-main hover:text-accent transition-colors"
              >
                {/* INSERTA TU SEGUNDO SVG AQUÍ */}
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  id="svg"
                  width="120"
                  height="50"
                  version="1.1"
                  viewBox="0 0 400 150"
                >
                  <g id="svgg" fillRule="evenodd" stroke="none">
                    <path
                      id="path0"
                      fill="#1c6cf4"
                      d="M62.479 34.439c-1.318.791-2.451 1.522-2.518 1.625-.07.106-.125.114-.128.019-.003-.097-.055-.091-.127.016-.132.196-.839.603-1.581.911-.252.104-.458.257-.458.34 0 .082-.081.15-.179.15s-.505.225-.905.5c-.399.275-.795.5-.879.5s-.326.15-.537.333-.477.334-.589.334-.301.116-.419.259c-.119.143-.447.369-.729.501-.282.133-.813.422-1.18.642s-.854.509-1.083.643c-1.735 1.011-3.263 1.916-3.638 2.154-.542.344-1.769 1.054-3.112 1.801-.55.305-1.025.618-1.056.694-.03.077-.156.139-.28.139-.123 0-.342.118-.486.262s-.263.2-.264.125-.058-.053-.125.05c-.068.103-.573.421-1.123.707-1.318.685-2.44 1.339-2.75 1.603a2 2 0 0 1-.625.328c-.206.063-.375.177-.375.253s-.206.221-.458.32c-.252.1-.683.314-.958.476s-.996.574-1.602.914l-1.102.619-.088 1.1c-.306 3.814-.096 20.243.26 20.243.094 0 .29.103.435.228.145.126.601.417 1.013.647 1.445.804 2.756 1.568 3.459 2.013.389.247.708.408.708.358 0-.051.094-.009.208.093.219.195.823.562 2.625 1.593 3.044 1.742 3.888 2.401 3.074 2.401-.132 0-.24.067-.24.149s-.182.194-.404.25-.631.293-.91.527c-.278.234-.527.403-.554.375-.027-.027-.349.134-.716.358-.366.223-.854.509-1.083.635-.469.256-5.519 3.251-6.468 3.835-.338.208-.774.46-.968.558-.305.156-.365.374-.447 1.622-.075 1.142-.041 26.711.038 28.358.019.396 4.482 3.174 4.887 3.041.068-.023.125.027.125.111 0 .083.318.314.708.512a30 30 0 0 1 1.325.723c1.22.717 4.393 2.47 6.464 3.571.781.415 1.513.828 1.628.919.114.09.209.098.211.018.001-.08.057-.068.125.026.067.093.586.414 1.152.712l1.03.541.637-.357c.35-.196.832-.495 1.072-.665.239-.17.472-.272.518-.226.045.045.177-.032.293-.172s.277-.254.358-.254c.125 0 2.426-1.256 4.895-2.672.367-.21.855-.487 1.084-.615.229-.127.641-.376.916-.553s.679-.4.897-.495.617-.33.885-.521a14 14 0 0 1 1.187-.723c1.278-.685 2.36-1.299 2.781-1.577.23-.151.698-.42 1.042-.597.534-.276.628-.408.644-.91.07-2.202.396-7.241.554-8.565.026-.22.478-.498 1.558-.959 1.642-.699 3.581-1.692 3.869-1.98.046-.046.44-.269.875-.496s.792-.471.792-.542.057-.11.128-.087c.07.023 1.386-.708 2.924-1.625 3.274-1.95 4.242-2.518 4.698-2.751.183-.094.67-.378 1.083-.631a89 89 0 0 1 3.083-1.81c1.914-1.088 2.331-1.332 3.037-1.776.574-.361 3.968-2.318 6.1-3.517.475-.267.901-.535.947-.597s.322-.215.615-.342c.292-.127.561-.346.596-.487.293-1.154.17-33.24-.144-37.505-.118-1.599-.104-1.565-.76-1.893a19 19 0 0 1-1.168-.651c-1.473-.899-3.361-1.956-3.494-1.956a.143.143 0 0 1-.145-.14c0-.077-.169-.225-.375-.328-.373-.186-1.559-.863-2.57-1.467-1.733-1.034-3.285-1.899-3.41-1.899a.143.143 0 0 1-.145-.14c0-.077-.169-.224-.375-.327A34 34 0 0 1 85 43.648c-.504-.292-1.067-.615-1.25-.718a18 18 0 0 1-.75-.451c-.576-.367-4.41-2.637-5.003-2.963-1.344-.738-4.056-2.346-5.582-3.309a6 6 0 0 0-.582-.319 5.4 5.4 0 0 1-.666-.392c-.355-.24-1.086-.656-2.75-1.564-.184-.1-.374-.236-.424-.302-.192-.256-1.573-.63-2.327-.63-.699 0-1.074.169-3.187 1.439m4.877 4.942a131 131 0 0 0 2.394 1.404c.642.365 2.004 1.157 3.028 1.759 1.023.602 1.904 1.051 1.958.998.054-.054.097-.022.097.071 0 .092.357.347.792.567s.829.444.875.499.496.327 1 .606 1.704.989 2.667 1.58 1.862 1.125 2 1.187.395.207.572.322 1.119.697 2.094 1.293a129 129 0 0 1 2.095 1.297c.177.118.528.303.78.412s.459.256.459.327.072.13.161.13.713.36 1.386.8c1.121.731 1.455 1.2.855 1.2-.129 0-.236.057-.237.125-.001.069-.169.207-.375.306-.628.303-2.035 1.114-2.124 1.223-.046.057-.27.195-.5.307a7 7 0 0 0-.666.371c-.285.191-1.975 1.145-3.334 1.882a19 19 0 0 0-1.245.725c-.515.357-.752.289-2.406-.689-.854-.504-1.575-.916-1.604-.916-.028 0-.658-.376-1.398-.835-.741-.46-1.348-.779-1.349-.709-.002.07-.058.043-.125-.059-.068-.102-.46-.356-.873-.563a13 13 0 0 1-1.166-.662c-.229-.157-1.055-.625-1.834-1.04a306 306 0 0 1-3.297-1.792c-1.446-.797-1.933-.995-2.105-.852-.123.102-1.077.621-2.119 1.152-2.141 1.092-3.417 1.793-4.954 2.721-.582.351-1.126.639-1.208.639a.15.15 0 0 0-.15.147c0 .081-.131.195-.292.253s-.443.198-.628.311-.935.565-1.667 1.004c-.731.44-1.962 1.199-2.735 1.688l-1.406.888-1.261-.754c-2.135-1.275-3.235-1.908-3.875-2.228-.338-.169-.657-.375-.708-.458-.051-.082-.412-.316-.802-.519s-.747-.421-.793-.486c-.045-.064-.552-.399-1.125-.744-1.15-.692-1.239-.853-.625-1.133.229-.104.417-.252.417-.329s.112-.14.25-.14c.137 0 .25-.088.25-.195s.047-.148.104-.091.54-.193 1.074-.555 1.009-.659 1.057-.659c.093 0 2.637-1.526 4.015-2.407.458-.294 1.921-1.191 3.25-1.994a170 170 0 0 0 3.417-2.11c.55-.357 1.496-.909 2.103-1.227s2.332-1.319 3.834-2.224a196 196 0 0 1 3.438-2.04c.389-.216.708-.45.708-.519 0-.25.65.007 1.856.735m26.383 21.452c.052.779.132 1.717.176 2.084.475 3.916.31 24.258-.201 24.769-.143.143-1.432.908-3.547 2.106-.413.234-.796.495-.852.581s-.169.157-.25.159c-.148.004-.777.337-1.927 1.021-.336.2-1.011.58-1.5.845-.488.264-1.283.733-1.766 1.041-.483.309-.91.561-.95.561-.159 0-2.176 1.234-2.228 1.363-.031.076-.116.102-.189.057-.074-.046-.227.029-.34.165-.113.137-.309.248-.435.248-.127 0-.23.08-.23.177s-.067.135-.148.085-.24.02-.354.157c-.113.136-.279.248-.369.248-.091 0-.963.477-1.938 1.059-.976.583-2.524 1.487-3.441 2.009s-1.779 1.015-1.917 1.096l-2.162 1.283c-1.052.625-1.989 1.166-2.083 1.202-.35.134-2.845 1.594-3.026 1.771-.194.188-.327 1.012-.47 2.913-.132 1.745-.273 3.379-.339 3.917-.034.275-.08.898-.103 1.384-.047 1.016-.334 1.311-2.358 2.428-.619.342-1.125.692-1.125.779s-.057.142-.125.122c-.147-.043-1.691.844-2.012 1.156-.121.118-.28.214-.353.214s-.672.319-1.332.709c-.659.389-1.494.879-1.855 1.088l-.657.38-.018-.88a41 41 0 0 0-.055-1.463c-.331-5.207-.335-14.114-.006-15.809.03-.151.06-.762.068-1.358l.014-1.083 1.041-.599c2.74-1.576 5.215-3.042 5.29-3.133.045-.056.271-.209.5-.34 2.536-1.451 3.207-1.841 4.333-2.512.504-.3 1.179-.694 1.5-.875 1.509-.851 2.09-1.201 2.167-1.303.045-.061.458-.313.916-.561.459-.247 1.134-.63 1.5-.851.367-.222.779-.454.917-.516.434-.195 3.739-2.107 4-2.314.137-.109.662-.414 1.167-.679.504-.265.954-.521 1-.569.045-.049.271-.185.5-.302.551-.283 1.186-.641 2.565-1.446a145 145 0 0 1 1.913-1.1c.618-.347.778-.529.804-.917.061-.904.21-4.143.293-6.317.045-1.191.124-2.954.177-3.916.093-1.704.228-5.699.241-7.125.004-.39.086-.709.184-.709.184 0 1.705-.654 2.573-1.107 1.549-.808 2.688-1.457 3.461-1.973 2.072-1.381 2.508-1.684 2.766-1.923.326-.302.437.168.595 2.503m-30.486-.166c.103 1.356.119 7.829.021 8.639-.029.235-.273.525-.619.733-.314.189-1.059.651-1.655 1.027-1.468.926-1.684 1.059-2.167 1.333-.229.129-1.579.953-3 1.829l-2.583 1.593-.124-1.369c-.246-2.737-.117-10.329.183-10.652.059-.064.445-.297.858-.518 2.934-1.571 5.315-2.956 5.797-3.371.209-.18.396-.29.416-.245s.275-.087.567-.295c.291-.207.854-.561 1.25-.787l.72-.409.113.537c.063.296.163 1.175.223 1.955m236.06.715c-.012.202-.06.743-.108 1.201-.047.459-.094 2.184-.104 3.834l-.018 3 .417.017a644 644 0 0 1 8.833.479l1.417.082q.166.01-.001.133c-.092.067-.763.797-1.492 1.622-.728.825-2.204 2.363-3.279 3.418l-1.954 1.917.22 1.269c.121.697.306 1.428.411 1.624.104.195.15.355.102.355-.087 0 .966 2.076 1.401 2.762l.218.345 1.187-.387a29 29 0 0 0 1.437-.496c.137-.061.289-.104.337-.096s.673-.122 1.389-.289c2.572-.598 5.203.415 5.747 2.214.287.948.376 3.095.164 3.961-.508 2.072-5.156 3.473-7.184 2.167-.439-.283-.87-.514-.959-.514a.165.165 0 0 1-.161-.167c0-.091-.106-.166-.236-.166s-.261-.057-.291-.125c-.101-.226-1.448-1.209-1.657-1.209-.113 0-.168-.037-.123-.082.248-.248-1.94-2.23-2.201-1.993-.147.133-.323.242-.391.242-.172 0-1.671 1.033-1.74 1.199-.03.074-.161.134-.291.134s-.236.075-.236.167-.057.149-.125.127c-.141-.044-1.319.739-2.743 1.824-.952.725-1.063 1.013-.567 1.47.201.185.538.688.717 1.072.125.268.479.727.926 1.199.16.169.289.348.285.398-.013.166 1.414 1.576 2.257 2.23 1.125.873 3.876 2.39 4.21 2.32.067-.015.235.017.373.07.221.084.712.216 1.5.401 2.285.537 7.802.236 8.575-.467.087-.079.322-.144.522-.144.444 0 3.07-1.292 3.07-1.51 0-.086.103-.157.228-.157.409 0 3.691-3.359 3.484-3.565-.056-.056-.022-.101.074-.101.208 0 1.38-1.921 1.38-2.262 0-.131.067-.238.148-.238s.199-.345.263-.765c.063-.421.148-.927.189-1.125.258-1.239.388-3.002.286-3.86-.065-.55-.101-1.094-.078-1.209.022-.114-.019-.208-.092-.209-.073 0-.146-.263-.162-.584s-.219-.997-.451-1.503c-.231-.505-.433-.974-.449-1.04-.164-.705-2.388-2.961-3.388-3.437a4.1 4.1 0 0 1-.865-.573c-.498-.466-1.185-.795-2.781-1.331l-1.398-.47 1.576-1.739c.867-.956 2.823-3.002 4.347-4.545 2.369-2.4 2.762-2.87 2.712-3.248-.087-.665-.693-2.196-.869-2.196-.085 0-.137-.056-.116-.125.234-.764-.875-1.373-2.455-1.349-.458.007-1.658-.036-2.667-.096s-5.639-.141-10.291-.179l-8.459-.071zm32.04.091-.398.056.109 17.777c.06 9.778.104 18.121.099 18.542-.01.75 0 .765.538.789.302.013.737.064.966.113 1.145.244 9.666.377 12.25.192.825-.059 1.65-.109 1.833-.112.471-.005 3.836-.474 4.833-.673a30 30 0 0 1 1.479-.255c1.771-.245 5.872-2.829 7.944-5.007 3.254-3.419 4.628-7.082 4.637-12.364.007-4.312-1.536-9.78-3.104-10.989-.148-.115-.199-.211-.113-.214s.045-.097-.093-.208c-.137-.112-.354-.406-.482-.654-.227-.441-2.872-3.133-3.078-3.133-.057 0-.285-.157-.507-.35s-.701-.512-1.065-.709a161 161 0 0 1-1.311-.717c-1.515-.838-4.081-1.533-6.072-1.643a74 74 0 0 1-2.485-.17c-1.665-.185-14.991-.411-15.98-.271m15.814 8.589c.321.045.835.159 1.143.253.309.095.609.163.667.152.194-.038 1.848.712 2.669 1.21 1.152.698 2.917 3.096 3.141 4.268.02.105.079.442.131.748s.141.707.199.89c.12.384.097 3.541-.033 4.414a49 49 0 0 0-.165 1.253c-.201 1.719-.789 3.076-1.811 4.177-.421.452-.767.879-.77.948s-.117.125-.255.125c-.137 0-.25.075-.25.167 0 .091-.056.15-.125.129-.068-.02-.322.095-.563.256-1.056.707-3.335 1.095-7.187 1.225l-3.125.106v-10.09c0-10.588.003-10.62.681-10.201.082.051.258.032.389-.041.249-.14 4.242-.131 5.264.011M66.173 74.753c.27.14.529.251.576.248.047-.002.357.109.689.247.331.139.628.252.659.252.277 0 5.275 2.616 6.095 3.19.244.171.525.31.625.31.101 0 .183.061.183.136s.31.31.69.524l.69.388-.639.311c-.352.171-.699.404-.771.517-.072.114-.133.146-.134.071s-.209.003-.461.174-.74.455-1.083.632c-.344.178-.625.393-.625.479s-.044.113-.097.06c-.102-.102-5.494 2.95-5.874 3.324-.121.12-.321.217-.445.217s-.437.171-.697.379-.75.506-1.092.662c-.341.156-.941.489-1.333.741-.392.251-.757.46-.812.463-.054.003-.917.488-1.916 1.079-1 .59-2.305 1.332-2.901 1.649a23 23 0 0 0-1.75 1.03c-.367.249-1.316.795-2.109 1.213s-1.748.953-2.122 1.189l-.68.429-1.044-.533c-.575-.293-1.158-.619-1.295-.725-.138-.106-1-.592-1.917-1.081a296 296 0 0 1-2.416-1.301c-.413-.227-1.238-.673-1.834-.993l-1.47-.79-.387-.208.383-.268c.21-.147.478-.268.595-.268s.213-.07.213-.155c0-.086.156-.205.346-.266.19-.06.98-.497 1.754-.969A87 87 0 0 1 45.623 86c.247-.138.55-.344.675-.458.124-.115.293-.209.375-.209.147 0 2.666-1.476 2.827-1.657.046-.051.308-.205.583-.341.601-.297 1.461-.865 1.602-1.058.056-.076.131-.121.167-.1.109.066 1.363-.615 3.393-1.841 1.065-.643 1.976-1.169 2.024-1.169s.415-.225.814-.5c.4-.275.807-.5.905-.5s.179-.075.179-.167.056-.153.125-.137c.125.031.448-.142 2.183-1.171a82 82 0 0 1 2.025-1.151 27 27 0 0 0 1.412-.817c.422-.288.659-.282 1.261.029"
                    ></path>
                    <path
                      id="path1"
                      fill="#040404"
                      d="M118.167 80.276v18.942l3.291-.104c3.011-.096 6.175-.358 6.344-.527.037-.037.108-2.764.158-6.059l.089-5.991 4.601-.084c3.606-.065 4.816-.144 5.6-.364 9.413-2.639 11.802-15.885 3.932-21.801-2.302-1.731-3.64-2.238-6.432-2.442-3.244-.236-11.048-.507-14.708-.51l-2.875-.003zm99.576-18.568c.046.207.16.825.254 1.375.299 1.74.713 2.823 4.044 10.584a1141 1141 0 0 1 9.538 23.024c.928 2.323.518 2.136 4.921 2.252 4.261.113 3.745.459 5.532-3.703 5.16-12.009 13.656-33.107 13.426-33.338-.407-.406-8.231-.496-9.541-.109-.488.144-.608.434-4.832 11.665-2.382 6.335-4.361 11.488-4.397 11.452s-.955-2.449-2.043-5.363a493 493 0 0 0-4.509-11.49l-2.532-6.193-.844-.101c-4.674-.561-9.135-.588-9.017-.055m-66.079 9.417c-.002 7.586.288 27.336.403 27.49.104.138 3.411.414 5.975.5l3.125.104V85.833h4.143l.262.901c.261.901 2.388 4.552 5.507 9.455l1.658 2.606.84.101c.462.056 2.879.102 5.372.103l4.533.001-.363-.875c-.92-2.218-3.092-6.379-4.199-8.042a65 65 0 0 1-2.228-3.647l-1.008-1.814 1.033-.667c7.276-4.7 6.851-16.902-.717-20.564-3.619-1.751-4.742-1.881-16.208-1.887l-8.125-.004zm36.386 8.896c.057 10.187.128 18.546.157 18.575.175.174 10.677.443 18.126.463l8.75.024.045-4.375.044-4.375H197.5v-6.166H212v-8.334h-14.5v-6h17.167V61.5h-26.721zm71.159-5.896.074 12.625.461 1.417c2.41 7.409 7.38 10.833 15.722 10.833 7.332 0 11.88-2.564 14.785-8.333 1.359-2.702 1.26-1.527 1.369-16.125l.098-13.042h-9.551l-.02 6.625a813 813 0 0 1-.125 11.708l-.105 5.084-.7 1.416c-1.103 2.231-2.252 3.391-3.713 3.749-3.362.824-5.843-.289-7.365-3.304l-.498-.986-.148-7.354a812 812 0 0 1-.154-12.146l-.006-4.792h-10.198zm-90.494-3.907c3.854.791 4.835 5.126 1.654 7.315l-.759.522-4.222.079-4.221.078v-8.425l3.208.1c1.765.054 3.718.203 4.34.331m-34.889.306c3.001.598 3.814 4.158 1.469 6.438l-.733.713-3.281.105-3.281.106v-7.765l2.375.094c1.306.052 2.859.191 3.451.309"
                    ></path>
                    <path
                      id="path2"
                      fill="#1c6cfc"
                      d="M56.708 43.832c-.298.181-.541.366-.541.41s.262-.075.583-.264.583-.374.583-.411c0-.107-.052-.084-.625.265M99.039 68.5c0 .321.034.452.076.292a1.4 1.4 0 0 0 0-.584c-.042-.16-.076-.029-.076.292m.011 3.833c0 .504.031.711.069.459a3.6 3.6 0 0 0 0-.917c-.038-.252-.069-.046-.069.458m.005 6.084c0 .641.031.883.067.538a6.2 6.2 0 0 0-.002-1.167c-.037-.296-.066-.013-.065.629"
                    ></path>
                  </g>
                </svg>
              </a>
            </div>
          </div>
          {/* ----- FIN DE CAMBIOS ----- */}

          {rootNode.expanded && rootNode.children && rootNode.children.length > 0 && (
            <div className="border-l-2 border-border-color"> 
              {rootNode.children.map(node => (
                <MindMapNode
                  key={node.id}
                  node={node}
                  level={0} 
                  onToggleChecked={handleToggleChecked}
                  onToggleExpanded={handleToggleExpanded}
                  inheritedColor={node.docTypeCode ? (DOC_TYPE_COLORS[node.docTypeCode] || DOC_TYPE_COLORS.DEFAULT) : DOC_TYPE_COLORS.DEFAULT}
                />
              ))}
            </div>
          )}
        </div>
      );
    };

    function parseNodeNameAndDetails(textToParse) {
      let docTypeCode = null;
      let docTypeFull = null;
      let status = null;
      let revision = null;
      let projectName = "";
      let isParsedFolder = false;

      const subfolderRegex = /^([A-Z0-9]+)-([A-Z]{2,4})-([0-9]+)-(.+)-([TC])-(A|B|0)$/i;
      const mainFolderRegex = /^([A-Z0-9]+)-(.+)-([TC])-(A|B|0)$/i;

      let match = textToParse.match(subfolderRegex);
      if (match) {
        isParsedFolder = true;
        docTypeCode = match[2].toUpperCase();
        projectName = match[4].trim();
        status = match[5].toUpperCase();
        revision = match[6].toUpperCase();
        docTypeFull = DOC_TYPE_MAP[docTypeCode] || docTypeCode; 
      } else {
        match = textToParse.match(mainFolderRegex);
        if (match) {
          isParsedFolder = true;
          projectName = match[2].trim();
          status = match[3].toUpperCase();
          revision = match[4].toUpperCase();
        }
      }
      return { docTypeCode, docTypeFull, status, revision, projectName, isParsedFolder, parsedNodeOriginalText: textToParse };
    }

    function parseMarkdownToMindMap(markdown) {
      const lines = markdown.split('\n').filter(line => line.trim());
      if (lines.length === 0) {
        return { 
            id: generateNodeId(), 
            originalContent: "Mindmap Vacío", 
            displayContent: "Mindmap Vacío", 
            parsedNodeOriginalText: "Mindmap Vacío",
            children: [], 
            expanded: true, 
            isHeaderLine: true 
        };
      }

      const pseudoRoot = { id: 'pseudo-root', children: [], level: -1, isHeaderContext: false, isParsedFolder: false, docTypeCode: null, originalContent: "PSEUDO_ROOT" };
      const stack = [pseudoRoot];
      const linkRegex = /\[([^\]]+)\]\(([^)]+)\)/;

      let isFirstNode = true; 

      lines.forEach(line => {
        const trimmedLine = line.trim();
        const indentLevel = line.search(/\S|$/);
        
        let textAfterPrefixes = trimmedLine.replace(/^[#\-\s]*/, '');
        const isCheckbox = textAfterPrefixes.startsWith('[ ]');
        if (isCheckbox) {
          textAfterPrefixes = textAfterPrefixes.substring(3).trim();
        }
        
        const originalContentForNode = textAfterPrefixes; 
        let textForDetailsParsing = originalContentForNode;
        let linkUrl = null;
        let linkTextIfAny = null;

        const linkMatch = originalContentForNode.match(linkRegex);
        if (linkMatch) {
          linkTextIfAny = linkMatch[1];
          linkUrl = linkMatch[2];
          textForDetailsParsing = linkTextIfAny;
        }

        const details = parseNodeNameAndDetails(textForDetailsParsing);
        let finalDisplayContent;
        
        const isHeaderLine = trimmedLine.startsWith('#');
        let nodeLevel;
        if (isHeaderLine) {
            nodeLevel = (trimmedLine.match(/^#+/) || [''])[0].length - 2; 
        } else {
            nodeLevel = Math.floor(indentLevel / 2); 
        }

        while (stack.length > 1 && stack[stack.length - 1].level >= nodeLevel &&
               !(isHeaderLine && stack[stack.length-1].level === nodeLevel -1 && stack[stack.length-1].isHeaderContext && nodeLevel > stack[stack.length-1].level) &&
               !(!isHeaderLine && stack[stack.length-1].isHeaderContext && nodeLevel > stack[stack.length-1].level)
        ) {
            if (isHeaderLine) {
                if (stack[stack.length-1].level >= nodeLevel) stack.pop(); else break;
            } else { 
                if (stack[stack.length - 1].level >= nodeLevel && !stack[stack.length - 1].isHeaderContext) stack.pop();
                else if (stack[stack.length - 1].isHeaderContext && nodeLevel <= stack[stack.length - 1].level) stack.pop(); 
                else break;
            }
        }
        
        const parentNodeFromStack = stack[stack.length - 1];

        if (details.isParsedFolder) {
            if (!details.docTypeCode) { 
                finalDisplayContent = details.projectName;
            } else { 
                let parentIsEffectivelyProjectRootOrHeader = 
                    (parentNodeFromStack.isParsedFolder && !parentNodeFromStack.docTypeCode && parentNodeFromStack.id !== 'pseudo-root') ||
                    parentNodeFromStack.isHeaderContext;

                if (parentIsEffectivelyProjectRootOrHeader) {
                    finalDisplayContent = details.docTypeFull || details.projectName; 
                } else {
                    finalDisplayContent = details.projectName;
                }
            }
        } else if (linkUrl) { 
            finalDisplayContent = linkTextIfAny || details.parsedNodeOriginalText;
        } else { 
            finalDisplayContent = details.parsedNodeOriginalText;
        }
        
        const shouldBeExpanded = isFirstNode; 
        if (isFirstNode) isFirstNode = false;

        const newNode = {
            id: generateNodeId(),
            originalContent: originalContentForNode, 
            displayContent: finalDisplayContent,      
            ...details, 
            linkUrl,
            children: [],
            expanded: shouldBeExpanded, 
            isCheckbox,
            isHeaderLine,
        };

        stack[stack.length - 1].children.push(newNode);
        stack.push({ 
            ...newNode, 
            level: nodeLevel, 
            isHeaderContext: isHeaderLine 
        }); 
      });
      
      const actualRootNode = pseudoRoot.children[0];
      if (actualRootNode) {
        return actualRootNode;
      }
      
      return { 
        id: generateNodeId(), 
        originalContent: "Error: No se pudieron parsear los datos", 
        displayContent: "Error de Parseo", 
        parsedNodeOriginalText: "Error de Parseo",
        children: [], 
        expanded: true, 
        isHeaderLine: true 
      };
    }

    const Legend = () => {
    const documentTypes = Object.entries(DOC_TYPE_MAP).map(([code, name]) => ({
        code,
        name,
        colorClass: DOC_TYPE_COLORS[code] || DOC_TYPE_COLORS.DEFAULT
    }));

    const statusTypes = [
        { code: "C", description: "Compartido" },
        { code: "T", description: "Trabajo en progreso" }
    ];

    const revisionTypes = [
        { code: "A", description: "Revisión Alfabética (A, B, C...)" },
        { code: "0", description: "Revisión Numérica (0, 1, 2...)" }
    ];

    const folderPatterns = [
        {
            description: "CARPETA PRINCIPAL DEL PROYECTO",
            code: "PR#-NOMBREPROYECTO-ESTADO-REV"
        },
        {
            description: "SUBCARPETA DE TIPO DE DOCUMENTO",
            code: "PR#-TIPO-#-NOMBRE-ESTADO-REV"
        }
    ];

    return (
        <div className="p-4 bg-white rounded-lg shadow-lg">
            <h3 className="text-xl font-saira font-bold mb-1 text-primary text-center">
                Codificación de Carpetas
            </h3>
            <p className="text-sm font-manrope text-text-main mb-4 text-center md:text-left"> 
                Los nombres de las carpetas siguen un patrón para identificar proyectos y tipos de documentos:
            </p>
            <div className="mb-6">
                <div className="flex justify-center">
                    <div className="inline-block text-left space-y-2"> 
                        {folderPatterns.map((pattern, index) => (
                            <div key={index}>
                                <p className="text-sm font-manrope text-text-main font-semibold mb-2 text-center">{pattern.description}</p>
                                <code className="block bg-secondary px-2 py-1 rounded text-sm text-text-main mt-0.5">
                                    {pattern.code}
                                </code>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
            <div className="space-y-5">
                <div>
                    <p className="text-sm font-manrope text-text-main font-semibold mb-2 text-center">
                        TIPO
                    </p>
                    <div className="flex justify-center">
                        <ul className="space-y-1.5 inline-block text-left">
                            {documentTypes.map(docType => (
                                <li key={docType.code} className="flex items-center text-sm font-manrope">
                                    <span className={`inline-block w-3 h-3 ${docType.colorClass} rounded-full mr-2 flex-shrink-0`}></span>
                                    <span className="text-text-main">
                                        <strong className="font-medium">{docType.code}:</strong> {docType.name}
                                    </span>
                                </li>
                            ))}
                        </ul>
                    </div>
                </div>
                <div>
                    <p className="text-sm font-manrope text-text-main font-semibold mb-2 text-center">
                        ESTADO
                    </p>
                    <div className="flex justify-center">
                        <ul className="space-y-1 inline-block text-left">
                            {statusTypes.map(status => (
                                <li key={status.code} className="text-sm font-manrope">
                                    <span className="text-text-main pl-[calc(0.75rem+0.5rem)]">
                                        <strong className="font-medium">{status.code}:</strong> {status.description}
                                    </span>
                                </li>
                            ))}
                        </ul>
                    </div>
                </div>
                <div>
                    <p className="text-sm font-manrope text-text-main font-semibold mb-2 text-center">
                        REV
                    </p>
                    <div className="flex justify-center">
                        <ul className="space-y-1 inline-block text-left">
                            {revisionTypes.map(rev => (
                                <li key={rev.code} className="text-sm font-manrope">
                                    <span className="text-text-main pl-[calc(0.75rem+0.5rem)]">
                                        <strong className="font-medium">{rev.code}:</strong> {rev.description}
                                    </span>
                                </li>
                            ))}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    );
};

    function App() {
      const [mindmapData, setMindmapData] = React.useState(null);
      const [loadingError, setLoadingError] = React.useState(null);

      React.useEffect(() => {
        const loadMindmapFromFile = async () => {
          try {
            // Asegúrate de que 'data.txt' esté en la misma carpeta que tu HTML,
            // o proporciona la ruta correcta si está en otro lugar accesible por el servidor.
            const response = await fetch('./data.txt'); 
            if (!response.ok) {
              throw new Error(`Error al cargar el archivo: ${response.statusText} (status: ${response.status})`);
            }
            const markdownText = await response.text();
            const initialParsedData = parseMarkdownToMindMap(markdownText);
            
            if (initialParsedData && initialParsedData.id) {
                setMindmapData(initialParsedData);
                setLoadingError(null);
            } else {
                // Esto podría ocurrir si parseMarkdownToMindMap devuelve algo inesperado
                // aunque ya tiene un fallback para "Error de Parseo".
                console.error("Fallo al parsear los datos del archivo, incluso después del fallback de parseo.");
                setMindmapData(parseMarkdownToMindMap("")); // Mostrar un mapa vacío como último recurso
                setLoadingError("Error al procesar los datos");
            }
          } catch (error) {
            console.error("Error cargando data.txt:", error);
            setLoadingError(`No se pudo cargar la información: ${error.message}.`);
            // Si falla la carga, parsear una cadena vacía para mostrar un mapa vacío
            setMindmapData(parseMarkdownToMindMap("")); 
          }
        };

        loadMindmapFromFile();
      }, []); // El array vacío asegura que esto se ejecute solo una vez, al montar el componente


      const handleNodesChange = (newRootNodeData) => {
        setMindmapData(newRootNodeData);
        // Ya no se guarda en localStorage
      };

      return (
        <div className="min-h-screen flex flex-col"> 
          <Header />
          <main className="flex-grow p-2 sm:p-4">
            <div className="max-w-7xl mx-auto flex flex-col lg:flex-row gap-4">
              
              <div className="flex-grow lg:w-2/3 space-y-4"> 
                {loadingError && (
                  <div className="p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg shadow-lg text-center font-manrope">
                    {loadingError}
                  </div>
                )}
                {mindmapData ? (
                  <MindMap
                    data={mindmapData}
                    onNodesChange={handleNodesChange}
                  />
                ) : (
                  !loadingError && <div className="p-4 bg-white rounded-lg shadow-lg text-center text-text-main font-manrope">Cargando lista...</div>
                )}
              </div>

              <div className="lg:w-1/3 lg:max-w-md flex-shrink-0">
                <Legend />
              </div>

            </div>
          </main>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(
      <React.StrictMode>
        <App />
      </React.StrictMode>
    );
  </script>
</body>
</html>